"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}
/*!
* jQuery SmartCart v4.0.1
* Interactive shopping cart plugin for jQuery
* https://www.techlaboratory.net/jquery-smartcart
*
* Created by Dipu Raj (http://dipu.me)
*
* Licensed under the terms of the MIT License
* https://github.com/techlab/jquery-smartcart/blob/master/LICENSE
*/
!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=function(t,e){return void 0===e&&(e="undefined"!=typeof window?require("jquery"):require("jquery")(t)),n(e),e}:n(jQuery)}(function(r){var s={products:[],productListSelector:"#product-list",productListItemSelector:".product-item",productDataElementSelector:".sc-item-data",addToListBtnSelector:".sc-add-to-list",productTemplate:'<div class="col">\n                            <div class="product-item card h-100">\n                                <img src="{{image}}" class="card-img-top" alt="...">\n                                <div class="card-body">\n                                    <h5 class="card-title">{{name}}</h5>\n                                    <p class="card-text">{{description}}</p>\n\n                                    <div>\n                                        <div class="form-group">\n                                            <label>Size: </label>\n                                            <select name="product_size" class="form-control form-control-sm">\n                                                <option>S</option>\n                                                <option>M</option>\n                                                <option>L</option>\n                                            </select>\n                                        </div>\n                                        \n                                        <div class="form-group form-group-sm">\n                                            <label>Color: </label><br />\n                                            <label class="radio-inline">\n                                                <input type="radio" class="sc-item-data" name="product_color" value="red"> red\n                                            </label>\n                                            <label class="radio-inline">\n                                                <input type="radio" class="sc-item-data" name="product_color" value="blue"> blue\n                                            </label>\n                                            <label class="radio-inline">\n                                                <input type="radio" class="sc-item-data" name="product_color" value="green"> green\n                                            </label>\n                                        </div>\n\n                                        <div class="form-group">\n                                            <input class="sc-item-data sc-cart-item-qty form-control form-control-sm" name="quantity" min="1" value="1" type="number">\n                                        </div>\n                                    </div>\n\n                                    <div class="d-md-flex justify-content-md-end">\n                                        <strong>{{price|money}}</strong>\n                                    </div>\n                                    <hr class="line">\n                                    <div class="d-md-flex justify-content-md-end mb-2">\n                                        <button type="button" class="sc-add-to-list btn btn-default btn-sm"\n                                            data-id="{{id}}"\n                                            data-price="{{price}}"\n                                            data-list="saveList">Save</button>\n                                        <button type="button" class="sc-add-to-list btn btn-info btn-sm"\n                                            data-id="{{id}}"\n                                            data-price="{{price}}"\n                                            data-list="wishList">Wishlist</button>\n                                    </div>\n                                    <div class="d-md-flex justify-content-md-end">\n                                        <button type="button" class="sc-add-to-list btn btn-success btn-sm"\n                                            data-id="{{id}}"\n                                            data-price="{{price}}"\n                                            data-list="cart">Add to Cart</button>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>',listItemTemplate:'<div class="d-flex justify-content-between">\n                                    <img src="{{image}}" alt="{{name}}" width="32" height="32" class="img-responsive rounded me-2">\n                                    <div>\n                                        <h6 class="my-0">{{name}}</h6>\n                                        <small class="text-muted">{{description}}</small>\n                                    </div>\n                                </div>\n\n                                <div class="d-flex justify-content-end text-muted">\n                                    {{price|money}} × <input type="number" min="1" value="{{quantity|number}}" class="ms-2 w-25 h-25 form-control form-control-sm" />\n                                </div>',params:{id:"id",name:"name",price:"price",quantity:"quantity"},combineProducts:!0,combineByKeys:["id","price"],style:{themePrefixCss:"sc-theme-",btnRemoveCss:"sc-cart-remove",btnClearCss:"sc-cart-clear",btnCheckoutCss:"sc-cart-checkout"},theme:"default",cart:[],resultName:"cart_list",highlightEffect:!0,cartItemTemplate:'<img class="img-responsive pull-left" src="{{product_image}}" />\n                            <h4 class="list-group-item-heading">{{product_name}}</h4>\n                            <p class="list-group-item-text">{{product_desc}}</p>',cartItemQtyTemplate:"{display_price} × {display_quantity} = {display_amount}",productContainerSelector:".sc-product-item",productElementSelector:"*",addCartSelector:".sc-add-to-cart",lang:{cartTitle:"Shopping Cart",checkout:"Checkout",clear:"Clear",subtotal:"Subtotal:",cartRemove:"×",cartEmpty:"Cart is Empty!<br />Choose your products"},submitSettings:{submitType:"form",ajaxURL:"",ajaxSettings:{}},currencySettings:{locales:"en-US",currencyOptions:{style:"currency",currency:"USD",currencyDisplay:"symbol"}},toolbarSettings:{showToolbar:!0,showCheckoutButton:!0,showClearButton:!0,showCartSummary:!0,checkoutButtonStyle:"default",checkoutButtonImage:"",toolbarExtraButtons:[]},toolbar:{position:"bottom",showNextButton:!0,showPreviousButton:!0,extraHtml:""},keyboard:{keyNavigation:!0,keyLeft:[37],keyRight:[39]},getContent:null},n=function(){function i(t,e){var n=this;_classCallCheck(this,i),this.options=r.extend(!0,{},s,e),this.listContainer=r(t),this.productContainer=r(this.options.productListSelector),this.lists=[],this.products=[],this.cart=[],this.is_init=!1,this._init(),setTimeout(function(){n._load()},0)}return _createClass(i,[{key:"_init",value:function(){if(this._setElements(),!0===this.is_init)return!0;this._setEvents();var n=this;r(this.options.cart).each(function(t,e){n._addToList(e)}),this._renderList("cart"),this.is_init=!0,this._triggerEvent("initialized")}},{key:"_load",value:function(){this._triggerEvent("loaded")}},{key:"_setEvents",value:function(){var i=this;this.productContainer.on("click",this.options.addToListBtnSelector,function(t){t.preventDefault();t=i._getItemData(r(t.currentTarget));i._addToList(t),i._renderList("cart")}),this.listContainer.on("click",function(t){r(t.target).hasClass(i.options.style.btnRemoveCss)&&(t.preventDefault(),t=r(t.target).parents("li").attr("data-time-key"),i._removeListItem("cart",t),i._renderList("cart"))}),this.listContainer.on("change","input",function(t){t.preventDefault();var e=r(t.target).parents("li").attr("data-time-key"),n={};n[i.options.params.quantity]=r(t.target).val(),i._updateListItem("cart",e,n),i._renderList("cart")})}},{key:"_setElements",value:function(){this.listContainer.append('<ul class="list-group sc-list-cart"></ul>')}},{key:"_renderProductList",value:function(){var e,n=this;this.options.products&&0<this.options.products.length&&(e="",this.options.products.forEach(function(t){e+=n._parseTemplate(n.options.productTemplate,t)}),this.productContainer.append(e))}},{key:"_addToList",value:function(t){var e=null!=(e=null!=(e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null)?e:t.list)?e:"cart";if(!(t=this._getMergedItem(t)).hasOwnProperty(this.options.params.price))return this._logError("Price is not set for the item"),!1;t.hasOwnProperty(this.options.params.quantity)||(t[this.options.params.quantity]=1);var n,i=this._getItemKey(t),s=(t.hasOwnProperty("itemKey")||(t.itemKey=i),null!=(s=this.lists[e])?s:[]),a=null,o="itemAdded";(a=this.options.combineProducts?s.filter(function(t){return t.itemKey==i}):a)&&0<a.length?(a=s.indexOf(a[0]),s[a][this.options.params.quantity]=+(null!=(n=s[a][this.options.params.quantity])?n:0)+ +(null!=(n=t[this.options.params.quantity])?n:0),(t=s[a]).timeKeyOld=t.timeKey,t.timeKey=Date.now(),o="itemUpdated"):(t.timeKey=Date.now(),s.push(t)),this.lists[e]=s,this._triggerEvent(o,t),this._listChanged(e)}},{key:"_listChanged",value:function(t){this._triggerEvent("listChanged",this._getListData(t)),0==this.lists[t].length&&this._triggerEvent("listEmpty",{listName:t})}},{key:"_getListData",value:function(t){var e=null!=(e=this.lists[t])?e:[];return{name:t,items:e,itemCount:e.length,isEmpty:!(0<e.length),itemTotal:this._getListTotal(t)}}},{key:"_getListTotal",value:function(t){var n=this,t=null!=(t=this.lists[t])?t:[],i=0;return 0<t.length&&t.forEach(function(t){var e=null!=(e=t[n.options.params.price])?e:0,t=null!=(t=t[n.options.params.quantity])?t:1;i+=+e*+t}),i}},{key:"_parseTemplate",value:function(t,s){var a=this;return t.replace(/{{\s?([^{}\s]*)\s?}}/g,function(t,e,n){var i,e=e.split("|");return a._getFormatted(null!=(i=s[e[0]])?i:null,null!=(i=e[1])?i:null)})}},{key:"_getFormatted",value:function(t,e){return null==t||"undefined"==_typeof(t)?"":null==e||"undefined"==_typeof(e)?t:"number"==e?Number((+t).toFixed(2)):"money"==e?Number((+t).toFixed(2)).toLocaleString(this.options.currencySettings.locales,this.options.currencySettings.currencyOptions):t}},{key:"_triggerEvent",value:function(t,e){t=r.Event(t);return this.listContainer.trigger(t,e),!t.isDefaultPrevented()&&t.result}},{key:"_getMergedItem",value:function(e){var t;return this.options.products&&0<this.options.products.length&&((t=this.options.products.filter(function(t){return t.id==e.id}))&&0<t.length&&(e=r.extend(!0,{},t[0],e))),e}},{key:"_getItemKey",value:function(e){var n="";return this.options.combineByKeys.forEach(function(t){n+=(null!=(t=e[t])?t:"")+""}),n}},{key:"_clearList",value:function(t){this.lists[t]=[],this._triggerEvent("listCleared",{listName:t}),this._listChanged(t)}},{key:"_removeListItem",value:function(t,e){var n,i;null!=e&&(i=null!=(i=this.lists[t])?i:[],n=[],i=i.filter(function(t){return t.itemKey!=e&&t.timeKey!=e||(n.push(t),!1)}),this.lists[t]=i,this._triggerEvent("itemRemoved",{listName:t,removedItems:n}),this._listChanged(t))}},{key:"_updateListItem",value:function(t,e,n){var i,s,a;null!=e&&(i=null!=(i=this.lists[t])?i:[],s=[],(a=i.filter(function(t){return(t.itemKey==e||t.timeKey==e)&&(s.push(t),!0)}))&&0<a.length&&(a=i.indexOf(a[0]),(n=r.extend(!0,{},i[a],n)).timeKeyOld=n.timeKey,n.timeKey=Date.now(),i[a]=n,this.lists[t]=i,this._triggerEvent("itemUpdated",{listName:t,updatedItems:[n]}),this._listChanged(t)))}},{key:"_getItemData",value:function(t){var i=this,s=t.data();return t.parents(this.options.productListItemSelector).find(this.options.productDataElementSelector).each(function(t,e){var e=r(e),n=e.is("[name]")?e.attr("name"):e.data("name");n&&"undefined"!==_typeof(n)&&(e=i._getContent(e))&&(s[n]=e)}),s}},{key:"_getContent",value:function(t){return t.is(":checkbox, :radio")?t.is(":checked")?t.val():"":t.is("[value], select")?t.val():t.is("img")?t.attr("src"):t.text()}},{key:"_renderList",value:function(){var s,a=this,t=null!=(t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null)?t:"cart",o=this.listContainer.find(".sc-list-cart");0!=o.length&&(0==(t=null!=(t=this.lists[t])?t:[]).length?o.empty():(s=[],t.forEach(function(t){var e,n=null!=(n=t.timeKey)?n:"",i=(s.push(n),o.find("[data-time-key='"+n+"']"));0==i.length&&0<(e=a._parseTemplate(a.options.listItemTemplate,t)).length&&((i=t.timeKeyOld?o.find("[data-time-key='"+t.timeKeyOld+"']"):null)&&0<i.length?(i.attr("data-time-key",n),i.html(e)):(i=r("<li data-time-key=".concat(n,' class="list-group-item d-flex justify-content-between lh-sm">').concat(e,"</li>")),o.append(i)),i.append('<button type="button" class="sc-cart-remove">'+a.options.lang.cartRemove+"</button>"),a._highlightElement(i))}),o.children().each(function(t,e){s.includes(parseInt(r(e).attr("data-time-key")))||a._removeElement(r(e))})))}},{key:"_highlightElement",value:function(t){!0===this.options.highlightEffect&&(t.addClass("sc-highlight"),setTimeout(function(){t.removeClass("sc-highlight")},500))}},{key:"_removeElement",value:function(t){t.fadeOut("fast",function(){t.remove()})}},{key:"_submitCart",value:function(){var i=this,n=this.listContainer.parents("form");if(!n)return this._logError("Form not found to submit"),!1;switch(this.options.submitSettings.submitType){case"ajax":var t=this.options.submitSettings.ajaxURL&&0<this.options.submitSettings.ajaxURL.length?this.options.submitSettings.ajaxURL:n.attr("action"),t=r.extend(!0,{},{url:t,type:"POST",data:n.serialize(),beforeSend:function(){i.cart_element.addClass("loading")},error:function(t,e,n){i.cart_element.removeClass("loading"),i._logError(n)},success:function(t){i.cart_element.removeClass("loading"),i._triggerEvent("cartSubmitted",[i.cart])}},this.options.submitSettings.ajaxSettings);r.ajax(t);break;case"paypal":n.children(".sc-paypal-input").remove(),r.each(this.cart,function(t,e){t+=1;n.append('<input class="sc-paypal-input" name="item_number_'+t+'" value="'+i._getValueOrEmpty(e[i.options.paramSettings.productId])+'" type="hidden">').append('<input class="sc-paypal-input" name="item_name_'+t+'" value="'+i._getValueOrEmpty(e[i.options.paramSettings.productName])+'" type="hidden">').append('<input class="sc-paypal-input" name="amount_'+t+'" value="'+i._getValueOrEmpty(e[i.options.paramSettings.productPrice])+'" type="hidden">').append('<input class="sc-paypal-input" name="quantity_'+t+'" value="'+i._getValueOrEmpty(e[i.options.paramSettings.productQuantity])+'" type="hidden">')}),n.submit(),this._triggerEvent("cartSubmitted",[this.cart]);break;default:n.submit(),this._triggerEvent("cartSubmitted",[this.cart])}return!0}},{key:"_getValueOrEmpty",value:function(t){return t&&"undefined"!==_typeof(t)?t:""}},{key:"_logError",value:function(t){if(!0!==this.options.debug)return!1;r.error(t)}},{key:"render",value:function(){this._renderProductList()}},{key:"clear",value:function(t){null!=t&&(this._clearList(t),this._renderList(t))}},{key:"submit",value:function(){this._submitCart()}},{key:"reset",value:function(){this._init(),this._load()}},{key:"setOptions",value:function(t){this.options=r.extend(!0,{},this.options,t),this._init()}},{key:"getOptions",value:function(){return this.options}},{key:"loader",value:function(t){this.listContainer.toggleClass(this.options.style.loaderCss,"show"===t)}}]),i}();r.fn.smartCart=function(t){var e;return void 0===t||"object"===_typeof(t)?this.each(function(){r.data(this,"smartCart")||r.data(this,"smartCart",new n(this,t))}):"string"==typeof t&&"_"!==t[0]&&"init"!==t?(e=r.data(this[0],"smartCart"),"destroy"===t&&r.data(this,"smartCart",null),e instanceof n&&"function"==typeof e[t]?e[t].apply(e,Array.prototype.slice.call(arguments,1)):this):void 0}});