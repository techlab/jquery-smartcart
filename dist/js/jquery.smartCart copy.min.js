"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}
/*!
 * jQuery Smart Cart v3.0.1
 * The smart interactive jQuery Shopping Cart plugin with PayPal payment support
 * http://www.techlaboratory.net/smartcart
 *
 * Created by Dipu Raj
 * http://dipuraj.me
 *
 * Licensed under the terms of the MIT License
 * https://github.com/techlab/SmartCart/blob/master/LICENSE
 */!function(r,s){var a={cart:[],resultName:"cart_list",theme:"default",combineProducts:!0,highlightEffect:!0,cartItemTemplate:'<img class="img-responsive pull-left" src="{product_image}" /><h4 class="list-group-item-heading">{product_name}</h4><p class="list-group-item-text">{product_desc}</p>',cartItemQtyTemplate:"{display_price} × {display_quantity} = {display_amount}",productContainerSelector:".sc-product-item",productElementSelector:"*",addCartSelector:".sc-add-to-cart",paramSettings:{productPrice:"product_price",productQuantity:"product_quantity",productName:"product_name",productId:"product_id"},lang:{cartTitle:"Shopping Cart",checkout:"Checkout",clear:"Clear",subtotal:"Subtotal:",cartRemove:"×",cartEmpty:"Cart is Empty!<br />Choose your products"},submitSettings:{submitType:"form",ajaxURL:"",ajaxSettings:{}},currencySettings:{locales:"en-US",currencyOptions:{style:"currency",currency:"USD",currencyDisplay:"symbol"}},toolbarSettings:{showToolbar:!0,showCheckoutButton:!0,showClearButton:!0,showCartSummary:!0,checkoutButtonStyle:"default",checkoutButtonImage:"",toolbarExtraButtons:[]},debug:!1};function i(t,e){this.options=r.extend(!0,{},a,e),this.cart=[],this.cart_element=r(t),this.init()}r.extend(i.prototype,{init:function(){this._setElements(),this._setToolbar(),this._setEvents();var a=this;r(this.options.cart).each(function(t,e){a._addToCart(e)}),this._hasCartChange()},_setElements:function(){var t=r('<input type="hidden" name="'+this.options.resultName+'" id="'+this.options.resultName+'" />');this.cart_element.append(t),this.cart_element.addClass("panel panel-default sc-cart sc-theme-"+this.options.theme),this.cart_element.append('<div class="panel-heading sc-cart-heading">'+this.options.lang.cartTitle+' <span class="sc-cart-count badge">0</span></div>'),this.cart_element.append('<div class="list-group sc-cart-item-list"></div>')},_setToolbar:function(){if(!0!==this.options.toolbarSettings.showToolbar)return!1;var t,e=r("<div></div>").addClass("panel-footer sc-toolbar"),a=r('<div class="sc-cart-toolbar">'),i=r('<div class="sc-cart-summary">');if(this.options.toolbarSettings.showCheckoutButton){var s="";switch(this.options.toolbarSettings.checkoutButtonStyle){case"paypal":s='<button class="sc-button-checkout-paypal sc-cart-checkout" type="submit"><img src="https://www.paypalobjects.com/webstatic/en_US/i/buttons/checkout-logo-medium.png" alt="Check out with PayPal" /></button>';break;case"image":s='<button class="sc-button-checkout-paypal sc-cart-checkout" type="submit"><img src="'+this.options.toolbarSettings.checkoutButtonImage+'" alt="Check out" /></button>';break;default:s='<button class="btn btn-info sc-cart-checkout" type="button">'+this.options.lang.checkout+"</button> "}a.append(s)}this.options.toolbarSettings.showClearButton&&(t=r('<button class="btn btn-danger sc-cart-clear" type="button">').text(this.options.lang.clear),a.append(t)),this.options.toolbarSettings.toolbarExtraButtons&&0<this.options.toolbarSettings.toolbarExtraButtons.length&&a.append(this.options.toolbarSettings.toolbarExtraButtons),this.options.toolbarSettings.showCartSummary&&((t=r('<div class="sc-cart-summary-subtotal">')).append(this.options.lang.subtotal).append(' <span class="sc-cart-subtotal">0</span>'),i.append(t)),e.append(i),e.append(a),this.cart_element.append(e)},_setEvents:function(){var e=this;r(this.options.addCartSelector).on("click",function(t){t.preventDefault();t=e._getProductDetails(r(this)),t=e._addToCart(t);r(this).parents(e.options.productContainerSelector).addClass("sc-added-item").attr("data-product-unique-key",t.unique_key)}),r(this.cart_element).on("click",".sc-cart-remove",function(t){t.preventDefault(),r(this).parents(".sc-cart-item").fadeOut("normal",function(){e._removeFromCart(r(this).data("unique-key")),r(this).remove(),e._hasCartChange()})}),r(this.cart_element).on("change",".sc-cart-item-qty",function(t){t.preventDefault(),e._updateCartQuantity(r(this).parents(".sc-cart-item").data("unique-key"),r(this).val())}),r(this.cart_element).on("click",".sc-cart-checkout",function(t){if(r(this).hasClass("disabled"))return!1;t.preventDefault(),e._submitCart()}),r(this.cart_element).on("click",".sc-cart-clear",function(t){if(r(this).hasClass("disabled"))return!1;t.preventDefault(),r(".sc-cart-item-list > .sc-cart-item",this.cart_element).fadeOut("normal",function(){r(this).remove(),e._clearCart(),e._hasCartChange()})})},_getProductDetails:function(t){var a=this,i={};return t.parents(this.options.productContainerSelector).find(this.options.productElementSelector).each(function(){var t,e;!0!==r(this).is("[name]")&&_typeof(r(this).data("name"))===_typeof(s)||(t=r(this).attr("name")?r(this).attr("name"):r(this).data("name"),e=a._getContent(r(this)),t&&e&&(i[t]=e))}),i},_addToCart:function(a){var t,i=this;return a.hasOwnProperty(this.options.paramSettings.productPrice)?(a.hasOwnProperty(this.options.paramSettings.productQuantity)||(this._logMessage("Quantity not found, default to 1"),a[this.options.paramSettings.productQuantity]=1),a.hasOwnProperty("unique_key")||(a.unique_key=this._getUniqueKey()),this.options.combineProducts&&0<(t=r.grep(this.cart,function(t,e){return i._isObjectsEqual(t,a)})).length?(t=this.cart.indexOf(t[0]),this.cart[t][this.options.paramSettings.productQuantity]=+this.cart[t][this.options.paramSettings.productQuantity]+ +a[this.options.paramSettings.productQuantity],a=this.cart[t],this._triggerEvent("itemUpdated",[a])):(this.cart.push(a),this._triggerEvent("itemAdded",[a])),this._addUpdateCartItem(a),a):(this._logError("Price is not set for the item"),!1)},_removeFromCart:function(a){var i=this;r.each(this.cart,function(t,e){if(e.unique_key===a)return e=i.cart[t],i.cart.splice(t,1),r('*[data-product-unique-key="'+a+'"]').removeClass("sc-added-item"),i._hasCartChange(),this._triggerEvent("itemRemoved",[e]),!1})},_clearCart:function(){this.cart=[],this._triggerEvent("cartCleared"),this._hasCartChange()},_updateCartQuantity:function(a,i){var s=this,n=this._getValidateNumber(i);r.each(this.cart,function(t,e){if(e.unique_key===a)return n&&(s.cart[t][s.options.paramSettings.productQuantity]=i),s._addUpdateCartItem(s.cart[t]),this._triggerEvent("quantityUpdated",[s.cart[t],i]),!1})},_addUpdateCartItem:function(t){var e,a=+t[this.options.paramSettings.productQuantity]*+t[this.options.paramSettings.productPrice],i=r(".sc-cart-item-list",this.cart_element),s=i.find("[data-unique-key='"+t.unique_key+"']");s&&0<s.length?(s.find(".sc-cart-item-qty").val(t[this.options.paramSettings.productQuantity]),s.find(".sc-cart-item-amount").text(this._getMoneyFormatted(a))):((s=r("<div></div>").addClass("sc-cart-item list-group-item")).append('<button type="button" class="sc-cart-remove">'+this.options.lang.cartRemove+"</button>"),s.attr("data-unique-key",t.unique_key),s.append(this._formatTemplate(this.options.cartItemTemplate,t)),e='<div class="sc-cart-item-summary"><span class="sc-cart-item-price">'+this._getMoneyFormatted(t[this.options.paramSettings.productPrice])+"</span>",e=(e+=' × <input type="number" min="1" max="1000" class="sc-cart-item-qty" value="'+this._getValueOrEmpty(t[this.options.paramSettings.productQuantity])+'" />')+' = <span class="sc-cart-item-amount">'+this._getMoneyFormatted(a)+"</span></div>",s.append(e),i.append(s)),!0===this.options.highlightEffect&&(s.addClass("sc-highlight"),setTimeout(function(){s.removeClass("sc-highlight")},500)),this._hasCartChange()},_hasCartChange:function(){r(".sc-cart-count",this.cart_element).text(this.cart.length),r(".sc-cart-subtotal",this.element).text(this._getCartSubtotal()),0===this.cart.length?(r(".sc-cart-item-list",this.cart_element).empty().append(r('<div class="sc-cart-empty-msg">'+this.options.lang.cartEmpty+"</div>")),r(this.options.productContainerSelector).removeClass("sc-added-item"),r(".sc-cart-checkout, .sc-cart-clear").addClass("disabled"),this._triggerEvent("cartEmpty")):(r(".sc-cart-item-list > .sc-cart-empty-msg",this.cart_element).remove(),r(".sc-cart-checkout, .sc-cart-clear").removeClass("disabled")),r("#"+this.options.resultName,this.cart_element).val(JSON.stringify(this.cart))},_getCartSubtotal:function(){var a=this,i=0;return r.each(this.cart,function(t,e){a._getValidateNumber(e[a.options.paramSettings.productPrice])&&(i+=+e[a.options.paramSettings.productPrice]*+e[a.options.paramSettings.productQuantity])}),this._getMoneyFormatted(i)},_submitCart:function(){var i=this,a=this.cart_element.parents("form");if(!a)return this._logError("Form not found to submit"),!1;switch(this.options.submitSettings.submitType){case"ajax":var t=this.options.submitSettings.ajaxURL&&0<this.options.submitSettings.ajaxURL.length?this.options.submitSettings.ajaxURL:a.attr("action"),t=r.extend(!0,{},{url:t,type:"POST",data:a.serialize(),beforeSend:function(){i.cart_element.addClass("loading")},error:function(t,e,a){i.cart_element.removeClass("loading"),i._logError(a)},success:function(t){i.cart_element.removeClass("loading"),i._triggerEvent("cartSubmitted",[i.cart]),i._clearCart()}},this.options.submitSettings.ajaxSettings);r.ajax(t);break;case"paypal":a.children(".sc-paypal-input").remove(),r.each(this.cart,function(t,e){t+=1;a.append('<input class="sc-paypal-input" name="item_number_'+t+'" value="'+i._getValueOrEmpty(e[i.options.paramSettings.productId])+'" type="hidden">').append('<input class="sc-paypal-input" name="item_name_'+t+'" value="'+i._getValueOrEmpty(e[i.options.paramSettings.productName])+'" type="hidden">').append('<input class="sc-paypal-input" name="amount_'+t+'" value="'+i._getValueOrEmpty(e[i.options.paramSettings.productPrice])+'" type="hidden">').append('<input class="sc-paypal-input" name="quantity_'+t+'" value="'+i._getValueOrEmpty(e[i.options.paramSettings.productQuantity])+'" type="hidden">')}),a.submit(),this._triggerEvent("cartSubmitted",[this.cart]);break;default:a.submit(),this._triggerEvent("cartSubmitted",[this.cart])}return!0},_getContent:function(t){return t.is(":checkbox, :radio")?t.is(":checked")?t.val():"":t.is("[value], select")?t.val():t.is("img")?t.attr("src"):t.text()},_isObjectsEqual:function(t,e){if(Object.getOwnPropertyNames(t).length!==Object.getOwnPropertyNames(e).length)return!1;for(var a in t)if("unique_key"!==a&&a!==this.options.paramSettings.productQuantity&&(_typeof(t[a])!==_typeof(s)||_typeof(e[a])!==_typeof(s))&&t[a]!==e[a])return!1;return!0},_getMoneyFormatted:function(t){return t=+t,Number(t.toFixed(2)).toLocaleString(this.options.currencySettings.locales,this.options.currencySettings.currencyOptions)},_getValueOrEmpty:function(t){return t&&_typeof(t)!==_typeof(s)?t:""},_getValidateNumber:function(t){return!!((t=+t)&&0<t)},_formatTemplate:function(t,e){for(var a=t.split("{"),i="",s=0;s<a.length;s++){var n=a[s].substring(0,a[s].indexOf("}"));0<n.length?i+=a[s].replace(n+"}",this._getValueOrEmpty(e[n])):i+=a[s]}return i},_triggerEvent:function(t,e){t=r.Event(t);return this.cart_element.trigger(t,e),!t.isDefaultPrevented()&&t.result},_getUniqueKey:function(){return(new Date).getTime()},_logMessage:function(t){if(!0!==this.options.debug)return!1;console.log(t)},_logError:function(t){if(!0!==this.options.debug)return!1;r.error(t)},submit:function(){this._submitCart()},clear:function(){this._clearCart()}}),r.fn.smartCart=function(t){var e,a=arguments;return t===s||"object"===_typeof(t)?this.each(function(){r.data(this,"smartCart")||r.data(this,"smartCart",new i(this,t))}):"string"==typeof t&&"_"!==t[0]&&"init"!==t?(e=r.data(this[0],"smartCart"),"destroy"===t&&r.data(this,"smartCart",null),e instanceof i&&"function"==typeof e[t]?e[t].apply(e,Array.prototype.slice.call(a,1)):this):void 0}}(jQuery,(window,void document));